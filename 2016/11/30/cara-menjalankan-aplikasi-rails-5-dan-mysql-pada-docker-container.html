<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
<link rel="icon" href="/assets/images/favicon.ico">
    
<title>Cara Menjalankan Aplikasi Rails 5 + MySQL Pada Docker Container | Miral Achmed</title>
    
 
    
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
   
<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">
    
<link href="/assets/css/screen.css" rel="stylesheet">
    
<link href="/assets/css/main.css" rel="stylesheet">

<script src="/assets/js/turbolinks.js" type="text/javascript" charset="utf-8"></script>

<!-- Open graph facebook -->
<meta content="Miral Achmed" property="og:site_name">

  <meta content="Cara Menjalankan Aplikasi Rails 5 + MySQL Pada Docker Container" property="og:title">


  <meta content="article" property="og:type">



  <meta content="My Simple Personal Blog" property="og:description">



  <meta content="https://achmiral.id/2016/11/30/cara-menjalankan-aplikasi-rails-5-dan-mysql-pada-docker-container" property="og:url">



  <meta content="2016-11-30T00:00:00+00:00" property="article:published_time">
  <meta content="https://achmiral.id/about/" property="article:author">



    
      <meta content="https://images.unsplash.com/photo-1493946740644-2d8a1f1a6aff?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=488a4ba9014132269a54faab75b6de49&auto=format&fit=crop&w=768&q=80" property="og:image">
    



  
  <meta content="Ruby" property="article:section">
  



  

<!-- end open graph -->
    
</head>
    

    

<body class="layout-post">

    
<!-- Begin Menu Navigation
================================================== -->
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    
    <div class="container pr-0">    
    
    <!-- Begin Logo -->
    <a class="navbar-brand" href="/">
    <img src="/assets/images/miral-achmed-1.png" alt="Miral Achmed">
    </a>
    <!-- End Logo -->
  
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>
    
    
    <div class="collapse navbar-collapse" id="navbarMediumish">
       
        <!-- Begin Menu -->
        
            <ul class="navbar-nav ml-auto">
                
                
                <li class="nav-item">
                
                <a class="nav-link" href="/">Home</a>
                </li>
                
                
                <li class="nav-item">
                
                <a class="nav-link" href="/about">About</a>
                </li>

                <li class="nav-item">
                <a target="_blank" class="nav-link" href="https://www.github.com/achmiral"><i class="fab fa-github"></i></a>
                </li>

                <li class="nav-item">
                <a target="_blank" class="nav-link" href="https://www.linkedin.com/in/achmiral/"><i class="fab fa-linkedin"></i></a>
                </li>

                <li class="nav-item">
                <a target="_blank" class="nav-link" href="https://instagram.com/achmiral"><i class="fab fa-instagram"></i></a>
                </li>
                
                
                <li class="nav-item">
                <a target="_blank" class="nav-link" href="https://twitter.com/achmiral"><i class="fab fa-twitter"></i></a>
                </li>

                <li class="nav-item">
                  <a target="_blank" class="nav-link" href="https://dev.to/achmiral">
                    <i class="fab fa-dev"></i>
                  </a>
                </li>
                
            </ul>		
  
        <!-- End Menu -->

    </div>
        
    </div>
</nav>
<!-- End Navigation
================================================== -->
    
<div class="site-content">   
<div class="container">
    
<!-- Site Title
================================================== -->
<!-- <div class="mainheading">
    <h1 class="sitetitle">Miral Achmed</h1>
    <p class="lead">
         My Simple Personal Blog
    </p>
</div> -->

    
    
<!-- Content
================================================== --> 
<div class="main-content">
    <!-- Begin Article
================================================== -->
<div class="container">
	<div class="row">

		<!-- Post Share -->
		<div class="col-md-2 pl-0">            
           <div class="share">
    <p>
        Share
    </p>
    <ul>
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://twitter.com/intent/tweet?text=Cara%20Menjalankan%20Aplikasi%20Rails%205%20+%20MySQL%20Pada%20Docker%20Container&amp;url=https://achmiral.id/2016/11/30/cara-menjalankan-aplikasi-rails-5-dan-mysql-pada-docker-container" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <i class="fab fa-twitter"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://facebook.com/sharer.php?u=https://achmiral.id/2016/11/30/cara-menjalankan-aplikasi-rails-5-dan-mysql-pada-docker-container" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
        <i class="fab fa-facebook-f"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://plus.google.com/share?url=https://achmiral.id/2016/11/30/cara-menjalankan-aplikasi-rails-5-dan-mysql-pada-docker-container" onclick="window.open(this.href, 'facebook-google', 'width=550,height=435');return false;">
        <i class="fab fa-google"></i>
        </a>
        </li>
        
    </ul>
    
    <div class="sep">
    </div>				
    <ul>
        <li> 
        <a class="small smoothscroll" href="#disqus_thread"></a>
        </li>
    </ul>
    
</div>  
		</div>
		

		<!-- Post -->        
        
        
		<div class="col-md-9 flex-first flex-md-unordered">
			<div class="mainheading">

                <!-- Author Box -->
                				
				<div class="row post-top-meta">
					<div class="col-md-2 author-thumb-container">
						<img class="author-thumb" src="https://www.gravatar.com/avatar/3654d753e5a623523e5190e7b3ec59e5?s=250&amp;d=mm&amp;r=x" alt="Miral Achmed">
					</div>
					<div class="col-md-10">
                        <div class="col-xs-12">
    						<a target="_blank" class="link-dark" href="https://achmiral.id">Miral Achmed</a>
                            <a target="_blank" href="https://twitter.com/achmiral" class="btn follow">Follow</a><br>
                        </div>
						<span class="author-description">Author of achmiral.id, FPV Drone Racing Pilot, Rubyist, Currently Student at AMIKOM Yogyakarta</span>						
					</div>
				</div>				
                
                
                <!-- Post Title -->
				<h1 class="posttitle">Cara Menjalankan Aplikasi Rails 5 + MySQL Pada Docker Container</h1> 
                
			</div>

			<!-- Post Featured Image -->
			
                
                    <a href="https://images.unsplash.com/photo-1493946740644-2d8a1f1a6aff?ixlib=rb-0.3.5&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;s=488a4ba9014132269a54faab75b6de49&amp;auto=format&amp;fit=crop&amp;w=768&amp;q=80">
                        <img class="featured-image img-fluid" src="https://images.unsplash.com/photo-1493946740644-2d8a1f1a6aff?ixlib=rb-0.3.5&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;s=488a4ba9014132269a54faab75b6de49&amp;auto=format&amp;fit=crop&amp;w=768&amp;q=80" alt="Cara Menjalankan Aplikasi Rails 5 + MySQL Pada Docker Container">
                    </a>
                
            
			<!-- End Featured Image -->

			<!-- Post Content -->
			<div class="article-post">
				<p>Selamat malam teman-teman, kali ini saya ingin sharing tutorial bagaimana cara menggunakan Docker pada aplikasi Rails versi 5. 
Sebelum memulai tutorialnya pastikan komputer / laptop / macbook (amin <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">) teman-teman sudah terinstall rails versi 5 dan docker 1.12.3 ya.</p>

<h3 id="bahan---bahan">Bahan - bahan</h3>
<p>Aplikasi yang akan kita gunakan pada tutorial kali ini antara lain:</p>

<ul>
  <li><a href="http://www.gudangilmukomputer.com/2015/05/cara-instal-ubuntu-1504-lengkap-dengan-gambar.html">OS Ubuntu 14.04.5 64bit</a></li>
  <li><a href="https://gorails.com/setup/ubuntu/16.04">Rails versi 5.0.0.1</a></li>
  <li><a href="https://docs.docker.com/engine/installation/linux/ubuntulinux/">Docker versi 1.12.3</a></li>
  <li><a href="https://docs.docker.com/compose/install/">Docker compose versi 1.9.0</a></li>
</ul>

<p>Tutorial instalasi aplikasi bisa langsung diklik pada nama aplikasinya</p>

<h3 id="deskripsi-project">Deskripsi Project</h3>
<p>Pada tutorial ini kita akan membuat sebuat aplikasi rails sederhana yaitu sebuah aplikasi note, dimana kita bisa 
menyimpan note pada aplikasi rails kita. Kemudian, kita akan menggunakan MySQL 5.7 sebagai database nya. 
Satu hal yang perhatikan bahwa proyek yang kita akan buat kali ini khusus untuk dijalankan pada environment development, jadi bukan untuk production.</p>

<p>Langsung saja kita mulai tutorialnya.</p>

<h3 id="langkah-langkah">Langkah-langkah</h3>

<p>Pertama kita buat sebuah projek rails baru dengan menggunakan perintah:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails new noteapp -d mysql
</code></pre></div></div>
<p><strong>-d</strong> : artinya kita akan menggunakan database MySQL.</p>

<p>tunggu sampai struktur projeknya selesai dibuat. Jika sudah sampai pada tampilan seperti dibawah ini,</p>

<p><img src="https://achmiral.id/assets/images/tutorial-rails-docker/langkah%20pertama.png" alt="langkah pertama"></p>

<p>Berarti struktur projek aplikasi rails teman-teman telah selesai dibuat.</p>

<p>Kemudian kita buka folder projek rails yang telah dibuat menggunakan text editor favorit teman-teman,
kali ini saya menggunakan sublime text 3. Tampilan projeknya akan seperti ini.</p>

<p><img src="https://achmiral.id/assets/images/tutorial-rails-docker/02.png" alt="Projek rails baru"></p>

<p>Setelah itu kita jalankan perintah:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rails</span> <span class="n">generate</span> <span class="n">scaffold</span> <span class="no">Note</span> <span class="n">title</span><span class="ss">:string</span> <span class="n">content</span><span class="ss">:text</span>
</code></pre></div></div>

<p>Perintah ini akan mengenerate struktur folder beserta file-file yang dibutuhkan agar aplikasinya bisa kita jalankan.</p>

<p><img src="https://achmiral.id/assets/images/tutorial-rails-docker/03.png" alt="Generate Scaffold"></p>

<p>Kemudian kita akan melakukan beberapa config pada file <em>database.yml</em></p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#noteapp/config/database.yml</span>

<span class="na">default</span><span class="pi">:</span> <span class="nl">&amp;default</span>
  <span class="na">adapter</span><span class="pi">:</span> <span class="s">mysql2</span>
  <span class="na">encoding</span><span class="pi">:</span> <span class="s">utf8</span>
  <span class="na">pool</span><span class="pi">:</span> <span class="m">5</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">&lt;%= ENV['NOTEAPP_DATABASE_HOST'] %&gt;</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s">&lt;%= ENV['NOTEAPP_DATABASE_USERNAME'] %&gt;</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s">&lt;%= ENV['NOTEAPP_DATABASE_PASSWORD'] %&gt;</span>
  <span class="na">socket</span><span class="pi">:</span> <span class="s">/var/run/mysqld/mysqld.sock</span>

<span class="na">development</span><span class="pi">:</span>
  <span class="s">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*default</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">noteapp_development</span>

<span class="na">test</span><span class="pi">:</span>
  <span class="s">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*default</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">noteapp_test</span>

<span class="na">production</span><span class="pi">:</span>
  <span class="s">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*default</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">noteapp_production</span>

</code></pre></div></div>

<p>kalau diperhatikan pada bagian <strong><em>host</em></strong>, <strong><em>username</em></strong>, <strong><em>password</em></strong> kita menggunakan environment 
variabel yang nantinya kita akan buat filenya.</p>

<p>Sekarang kita perlu membuat sebuah environment file <strong><em>.env</em></strong>, kemudian kita ketikkan sebagai berikut:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#noteapp/.env</span>

<span class="c1"># App Env</span>
<span class="s">NOTEAPP_DATABASE_HOST=db</span>
<span class="s">NOTEAPP_DATABASE_USERNAME=root</span>
<span class="s">NOTEAPP_DATABASE_PASSWORD=password</span>

<span class="c1"># MySQL Env</span>
<span class="s">MYSQL_ROOT_PASSWORD=password</span>

</code></pre></div></div>

<p>NOTEAPP_DATABASE_HOST merupakan environment variable yang kita gunakan untuk mengisi attribut host pada 
konfigurasi <em><strong>database.yml</strong></em>. Kita menggunakan nama <strong><em>db</em></strong> karena nama tersebut merupakan nama dari 
kontainer database MySQL kita yang nanti kita akan koneksikan ke kontainer aplikasi rails kita.</p>

<p>Langkah berikutnya kita akan membuat sebuah file <strong><em>Dockerfile</em></strong>. Dockerfile bisa disebut sebagai sebuah file resep 
untuk membuat sebuah image, didalam file docker file berisi bahan-bahan dan perintah-perintah yang dibutuhkan 
untuk membuat sebuah image.</p>

<p>Langsung saja kita buat sebuat file bernama <strong><em>Dockerfile</em></strong> pada root folder aplikasi rails kita.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#noteapp/Dockerfile</span>

<span class="c1"># kita akan menggunakan image ruby:2.3.2-alpine sebagai </span>
<span class="c1"># base image dari image baru kita</span>
<span class="no">FROM</span> <span class="n">ruby</span><span class="p">:</span><span class="mf">2.3</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">alpine</span>

<span class="c1"># Kita perlu menginstall packet / library yang akan </span>
<span class="c1"># dibutuhkan oleh aplikasi kita.</span>
<span class="no">RUN</span> <span class="n">apk</span> <span class="o">--</span><span class="n">update</span> <span class="n">add</span> <span class="o">--</span><span class="n">virtual</span> <span class="n">build</span><span class="o">-</span><span class="n">dependencies</span> <span class="p">\</span>
                               <span class="n">build</span><span class="o">-</span><span class="n">base</span> <span class="p">\</span>
                               <span class="n">libxml2</span><span class="o">-</span><span class="n">dev</span> <span class="p">\</span>
                               <span class="n">libxslt</span><span class="o">-</span><span class="n">dev</span> <span class="p">\</span>
                               <span class="n">zlib</span><span class="o">-</span><span class="n">dev</span> <span class="p">\</span>
                               <span class="n">mysql</span><span class="o">-</span><span class="n">dev</span> <span class="p">\</span>
                               <span class="n">nodejs</span> <span class="p">\</span>
                               <span class="n">tzdata</span> <span class="p">\</span>
                               <span class="o">&amp;&amp;</span> <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="sr">/var/</span><span class="n">cache</span><span class="o">/</span><span class="n">apk</span><span class="o">/*</span>

<span class="c1"># perintah ini akan membuat sebuah folder bernama app</span>
<span class="c1"># pada image baru kita</span>
<span class="no">RUN</span> <span class="n">mkdir</span> <span class="o">-</span><span class="nb">p</span> <span class="sr">/usr/s</span><span class="n">rc</span><span class="o">/</span><span class="n">app</span>

<span class="c1"># perintah ini akam merubah folder kerja kita menjadi</span>
<span class="c1"># /usr/src/app</span>
<span class="no">WORKDIR</span> <span class="sr">/usr/s</span><span class="n">rc</span><span class="o">/</span><span class="n">app</span>

<span class="c1"># perintah ini akan melakukan proses copy Gemfile dari komputer</span>
<span class="c1"># kita ke image baru</span>
<span class="no">COPY</span> <span class="no">Gemfile</span> <span class="no">Gemfile</span><span class="p">.</span><span class="nf">lock</span> <span class="p">.</span><span class="nf">/</span>

<span class="c1"># perintah ini akan menjalankan bundle install pada image</span>
<span class="no">RUN</span> <span class="n">gem</span> <span class="n">install</span> <span class="n">bundler</span> <span class="o">&amp;&amp;</span> <span class="n">bundle</span> <span class="n">install</span> <span class="o">--</span><span class="n">jobs</span> <span class="mi">20</span>

<span class="c1"># Perintah ini akan menjalankan proses copy folder source </span>
<span class="c1"># code aplikasi noteapp kita ke dalam image.</span>
<span class="no">COPY</span> <span class="p">.</span> <span class="nf">.</span><span class="o">/</span>
</code></pre></div></div>

<p>Setelah membuat Dockerfile selanjutnya kita akan membuat sebuah file lagi bernama <em>docker-compose.yml</em>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#noteapp/docker-compose.yml</span>

<span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">2'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">app</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">db</span>
    <span class="na">links</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">db</span>
    <span class="na">env_file</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">.env</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">3000:3000"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">.:/usr/src/app</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">rails server -b 0.0.0.0 -p </span><span class="m">3000</span>

  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mysql:5.7</span>
    <span class="na">env_file</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">.env</span>

</code></pre></div></div>

<p>Kita akan menggunakan 2 buah image yang pertama <em>app</em> kemudian yang kedua adalah <em>db</em>.</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">build: .</code> artinya docker akan membuild sebuah image baru berdasarkan resep pada <code class="language-plaintext highlighter-rouge">Dockerfile</code>
</li>
  <li>
<code class="language-plaintext highlighter-rouge">depends_on: -db</code> artinya container <code class="language-plaintext highlighter-rouge">app</code> akan running setelah container <code class="language-plaintext highlighter-rouge">db</code> running.</li>
  <li>
<code class="language-plaintext highlighter-rouge">links: -db</code> artinya container ini akan dikoneksikan ke container <code class="language-plaintext highlighter-rouge">db</code>.</li>
  <li>
<code class="language-plaintext highlighter-rouge">env_file: .env</code> artinya container ini akan menggunakan environment variabel yang ada pada file <code class="language-plaintext highlighter-rouge">.env</code>
sebagai environment variabel pada image</li>
  <li>
<code class="language-plaintext highlighter-rouge">ports: -"3000:3000"</code> artinya kita akan membuka port 3000 pada container, yang bisa kita akses dari luar kontainer pada porst 3000 juga</li>
  <li>
<code class="language-plaintext highlighter-rouge">volumes: .:/usr/src/app</code> artinya kita akan menghubungkan direktori projek kita yang ada dilaptop ke
direktori <code class="language-plaintext highlighter-rouge">/usr/src/app</code> pada image.</li>
  <li>
<code class="language-plaintext highlighter-rouge">command: rails server -b 0.0.0.0 -p 3000</code> artinya ketika kita menjalankan kontainer dari image ini,maka container akan otomatis menjalankan perintah ini pada saat startup.</li>
</ul>

<p>Image <em>db</em></p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">image: mysql:5.7</code> kita akan menggunakan image mysql:5.7 sebagai database</li>
  <li>
<code class="language-plaintext highlighter-rouge">env_file: .env</code> image <em>db</em> akan membaca file .env untuk mencari environmen variabel MYSQL_ROOT_PASSWORD.</li>
</ul>

<p>Kemudian kita save file <em>docker-compose.yml</em> tersebut pada root directory noteapp kita. Jalankan perintah</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">docker-compose build</span>
</code></pre></div></div>
<p>untuk membuild image kita berdasarkan config dari file <em>docker-compose.yml</em></p>

<p>Proses pembuatan image akan berjalan, tunggu beberapa menit, tergantung kecepatan internet kita <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">.</p>

<p><img src="https://achmiral.id/assets/images/tutorial-rails-docker/04.png" alt="docker compose build"></p>

<p>Jika proses build nya sudah selesai maka tampilannya akan mirip dengan tampilan berikut</p>

<p><img src="https://achmiral.id/assets/images/tutorial-rails-docker/05.png" alt="docker compose build"></p>

<p>Setelah itu kita akan menjalankan container menggunakan perintah</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">docker</span><span class="o">-</span><span class="n">compose</span> <span class="n">up</span>
</code></pre></div></div>

<p>Maka tampilannya akan seperti berikut ini</p>

<p><img src="https://achmiral.id/assets/images/tutorial-rails-docker/06.png" alt="docker compose build"></p>

<p>Kemudian jalankan aplikasi web browser, dan akses alamat</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">http</span><span class="ss">:/</span><span class="o">/</span><span class="n">localhost</span><span class="p">:</span><span class="mi">3000</span>
</code></pre></div></div>

<p>Jika muncul tampilan seperti dibawah ini</p>

<p><img src="https://achmiral.id/assets/images/tutorial-rails-docker/07.png" alt="docker compose build"></p>

<p>Jangan panik dulu, menurut pesan erornya menunjukan Unknown database, karena database untuk aplikasi kita belum dibuat. Untuk itu mari kita buat databasenya</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">docker</span> <span class="nb">exec</span> <span class="n">noteapp_app_1</span> <span class="n">rails</span> <span class="n">db</span><span class="ss">:setup</span>
<span class="n">docker</span> <span class="nb">exec</span> <span class="n">noteapp_app_1</span> <span class="n">rails</span> <span class="n">db</span><span class="ss">:migrate</span>
</code></pre></div></div>

<p>noteapp_app_1 adalah nama container aplikasi rails kita. Mungkin di komputer teman-teman akan berbeda namanya. Untuk mengeceknya teman-teman bisa menjalankan perintah</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">docker</span> <span class="n">ps</span>
</code></pre></div></div>
<p>Kira-kira outputnya akan seperti ini.</p>

<p><img src="https://achmiral.id/assets/images/tutorial-rails-docker/08.png" alt="docker compose build"></p>

<p>Ketika perintah 	<code class="language-plaintext highlighter-rouge">rails db:setup</code> dan <code class="language-plaintext highlighter-rouge">rails db:migrate</code> dijalankan akan muncul output sebagai berikut</p>

<p><img src="https://achmiral.id/assets/images/tutorial-rails-docker/09.png" alt="docker compose build"></p>

<p>Kemudian kita kembali ke web browser dan refresh page.</p>

<p>Waawww,, aplikasi rails kita sudah running <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20"></p>

<p><img src="https://achmiral.id/assets/images/tutorial-rails-docker/10.png" alt="docker compose build"></p>

<p>Eitss.. tunggu dulu. Kita masih perlu merubah file <code class="language-plaintext highlighter-rouge">config/routes.rb</code> pada projek kita, agar aplikasi noteapp kita bisa berjalan semestinya</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># config/routes.rb</span>

<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
 <span class="n">root</span> <span class="s1">'notes#index'</span>
 <span class="n">resources</span> <span class="ss">:notes</span>
<span class="k">end</span>

</code></pre></div></div>

<p>Kemudian di refresh page pada browser</p>

<p><img src="https://achmiral.id/assets/images/tutorial-rails-docker/11.png" alt="docker compose build"></p>

<p>Maka tampilannya kira-kira akan seperti ini.</p>

<p>Selamat kita telah berhasil menjalankan aplikasi rails + mysql pada container docker <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">.</p>

<p>Terima kasih sudah membaca tutorial bagaimana cara menjalankan aplikasi rails 5 + mysql pada docker container. Jika ada penjelasan saya yang kurang tepat mohon dikoreksi silahkan memberikan komentar di bawah ini <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">, soalnya saya juga baru belajar mengenai teknologi container pada docker, jadi pemahaman saya mengenai docker masih banyak kurangnya. Saya menantikan komentar teman-teman, supaya kita bisa belajar bersama-sama <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20"></p>

			</div>

            <!-- Post Date -->
            <p>
            <small>
                <span class="post-date"><time class="post-date" datetime="2016-11-30">30 Nov 2016</time></span>           
                
                </small>
            </p>
            
			<!-- Post Categories -->
			<div class="after-post-tags">
				<ul class="tags">
                    
                    
                    <li>
                     <a href="/category/container/">Container</a>
                    </li>
                    
                    <li>
                     <a href="/category/docker/">Docker</a>
                    </li>
                    
                    <li>
                     <a href="/category/ruby/">Ruby</a>
                    </li>
                    
                    <li>
                     <a href="/category/ruby-on-rails/">Ruby on Rails</a>
                    </li>
                    
                    <li>
                     <a href="/category/tutorial/">tutorial</a>
                    </li>
                    
				</ul>
			</div>
			<!-- End Categories -->
            
            <!-- Prev/Next -->
            <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
            
            <a class="prev d-block col-md-6" href="https://achmiral.id/2016/11/27/berkenalan-dengan-docker"> « Berkenalan dengan Docker</a>
            
            
            <a class="next d-block col-md-6 text-lg-right" href="https://achmiral.id/2018/10/25/membuat-simple-crud-dengan-sinatra-dan-postgresql-part-1">Aplikasi CRUD Sederhana Menggunakan Sinatra dan Postgresql [Part 1] » </a>
            
            <div class="clearfix"></div>
            </div>
            <!-- End Categories -->

		</div>
		<!-- End Post -->

	</div>
</div>
<!-- End Article
================================================== -->

  

<!-- Begin Comments
================================================== -->

    <div class="container">
        <div id="comments" class="row justify-content-center mb-5">
            <div class="col-md-2"></div>
            <div class="col-md-9 mx-auto">              
                <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'achmiral-id'; 
        var disqus_developer = 0;
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = window.location.protocol + '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>
                
            </div>
        </div>
    </div>

<!--End Comments
================================================== -->
</div>

<!-- Bottom Alert Bar
================================================== -->
<!-- <div class="alertbar">
	<div class="container text-center">
		<span><img src="/assets/images/miral-achmed-1.png" alt=""> &nbsp; Never miss a <b>story</b> from us, subscribe to our newsletter</span>
        <form action="" method="post" name="mc-embedded-subscribe-form" class="wj-contact-form validate" target="_blank" novalidate>
            <div class="mc-field-group">
            <input type="email" placeholder="Email" name="EMAIL" class="required email" id="mce-EMAIL" autocomplete="on" required>
            <input type="submit" value="Subscribe" name="subscribe" class="heart">
            </div>
        </form>
	</div>
</div>  -->   
    
</div>
<!-- /.container>
    
<!-- Categories Jumbotron
================================================== -->
<!-- <div class="jumbotron fortags">
	<div class="d-flex h-100">
		<div class="col-md-4 align-self-center text-center h-100">
            <div class="d-flex align-items-center justify-content-center h-100">
			 <h2 class="d-md-block d-none align-self-center">Explore →</h2>
            </div>
		</div>
		<div class="col-md-8 align-self-center text-center">
            
          
             
              <a href="/category/Docker">Docker (2)</a>
             
              <a href="/category/tutorial">Tutorial (7)</a>
             
              <a href="/category/Ruby">Ruby (1)</a>
             
              <a href="/category/Ruby on Rails">Ruby on rails (1)</a>
             
              <a href="/category/Container">Container (1)</a>
             
              <a href="/category/ruby">Ruby (4)</a>
             
              <a href="/category/sinatra">Sinatra (4)</a>
             
              <a href="/category/activerecord">Activerecord (4)</a>
             
              <a href="/category/postgresql">Postgresql (4)</a>
             
              <a href="/category/jekyll">Jekyll (1)</a>
             
              <a href="/category/turbolinks">Turbolinks (1)</a>
            
          
        

		</div>
	</div>
</div>
  -->


<!-- Begin Footer
================================================== -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                 Copyright © 2021 Miral Achmed 
            </div>
            <div class="col-md-6 col-sm-6 text-center text-lg-right">    
                <a target="_blank" href="https://www.wowthemes.net">Mediumish Theme</a> by WowThemes.net
            </div>
        </div>
    </div>
</footer>
<!-- End Footer
================================================== -->

   
</div> <!-- /.site-content>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->

<!-- Load Facebook SDK for JavaScript -->
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      xfbml            : true,
      version          : 'v3.2'
    });
  };

  (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/en_US/sdk/xfbml.customerchat.js';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!-- Your customer chat code -->
<div class="fb-customerchat" attribution="setup_tool" page_id="182341549350497">
</div>
    
<script src="/assets/js/jquery.min.js"></script>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    
<script src="/assets/js/ie10-viewport-bug-workaround.js"></script>
    
<script src="/assets/js/mediumish.js"></script>

<script id="dsq-count-scr" src="//achmiral-id.disqus.com/count.js"></script>
</body>
</html>
